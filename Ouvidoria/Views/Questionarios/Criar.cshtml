@model Ouvidoria.Models.Questionario

<h2>Novo Questionário</h2>

<link href="~/css/fontawesome.css" rel="stylesheet">

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            <div class="col-md-12 text-center">
                <span class="field-validation-valid text-danger" hidden="hidden" id="span-aviso">Por favor, preencha todos os campos.</span>
            </div>
        </div>
        <div class="row">
            <div class="form-group">

                @Html.LabelFor(model => model.Titulo, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10 linhas">
                    <div class="col-md-12">
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.Titulo, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Titulo, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Descricao, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10 linhas">
                    <div class="col-md-12">
                        <div class="col-md-8">
                            @Html.TextAreaFor(model => model.Descricao, new { @class = "form-control" })
                            @Html.ValidationMessageFor(model => model.Descricao, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.DataInicio, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10 linhas">
                    <div class="col-md-12">
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.DataInicio, new { htmlAttributes = new { @class = "form-control datepicker" } })
                            @Html.ValidationMessageFor(model => model.DataInicio, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.DataFim, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10 linhas">
                    <div class="col-md-12">
                        <div class="col-md-8">
                            @Html.EditorFor(model => model.DataFim, new { htmlAttributes = new { @class = "form-control datepicker" } })
                            @Html.ValidationMessageFor(model => model.DataFim, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="div-Perguntas">
            <div class="form-group">
                @Html.LabelFor(model => model.Pergunta, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10 linhas" id="Pergunta[0]" opcoes="2">
                    <div class="col-md-12 pergunta">
                        <div class="col-md-8">
                            <input type="text" name="Pergunta[0].Descricao" placeholder="Descrição da pergunta" class="form-control descricao" id="Perguntas[0].Descricao"
                                   data-val="true" data-val-maxlength="Tamanho maximo de quinhentos caracteres" data-val-maxlength-max="500"
                                   data-val-minlength="Tamanho minimo de cinco caracteres" data-val-minlength-min="5" data-val-required="O campo Descrição é obrigatório." />
                            <span class="field-validation-valid text-danger" data-valmsg-for="Pergunta[0].Descricao" data-valmsg-replace="true"></span>
                        </div>
                        <div class="col-md-2">
                            <select name="Pergunta[0].tipo" class="form-control col-md-2 ddl-tipos">
                                <option value="0">Dissertativa</option>
                                <option value="1">Objetiva</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button class="btn btn-primary form-control " id="btn-add-pergunta" style="vertical-align: middle;">Nova Pergunta</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Salvar" class="btn btn-default" id="btn-submit" />
            </div>
        </div>
    </div>
}

<template id="template-pergunta">
    <div class="form-group">
        <div class="col-md-10 col-md-offset-2 linhas" id="Pergunta[:qtdPerguntas:]" opcoes="2">
            <div class="col-md-12 pergunta">
                <div class="col-md-8">
                    <input type="text" name="Pergunta[:qtdPerguntas:].Descricao" placeholder="Descrição da pergunta" class="form-control txt-descricao"
                           id="Pergunta[:qtdPerguntas:].Descricao" data-val="true" data-val-maxlength="Tamanho maximo de quinhentos caracteres" data-val-maxlength-max="500"
                           data-val-minlength="Tamanho minimo de cinco caracteres" data-val-minlength-min="5" data-val-required="O campo Descrição é obrigatório." />
                    <span class="field-validation-valid text-danger" data-valmsg-for="Pergunta[:qtdPerguntas:].Descricao" data-valmsg-replace="true"></span>
                </div>
                <div class="col-md-2">
                    <select name="Pergunta[:qtdPerguntas:].tipo" class="form-control col-md-2 ddl-tipo">
                        <option value="0">Dissertativa</option>
                        <option value="1">Objetiva</option>
                    </select>
                </div>
                <div class="col-md-2 text-center">
                    <button class="btn btn-danger btn-remover-pergunta">
                        <i class="glyphicon glyphicon-trash" style="vertical-align: middle;"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>

<template id="template-opcao">
    <div class="col-md-12 opcoes">
        <div class="col-md-2">
            <label class="control-label lbl-opcao">Opção 1</label>
        </div>
        <div class="col-md-4">
            <input type="text" name=":id:.Opcao[0].Descricao" placeholder="Opção" class="form-control opcao" />
        </div>
    </div>
    <div class="col-md-12 opcoes">
        <div class="col-md-2">
            <label class="control-label lbl-opcao">Opção 2</label>
        </div>
        <div class="col-md-4">
            <input type="text" name=":id:.Opcao[1].Descricao" placeholder="Opção" class="form-control opcao" />
        </div>
        <div class="col-md-2 text-center">
            <button class="btn btn-primary btn-add-opcao">
                <i class="glyphicon glyphicon-plus-sign" style="vertical-align: middle;"></i>
            </button>
        </div>
    </div>
</template>

<template id="template-nova-opcao">
    <div class="col-md-12 opcoes">
        <div class="col-md-2">
            <label class="control-label lbl-opcao">Opção :indices:</label>
        </div>
        <div class="col-md-4">
            <input type="text" name=":id:.Opcao[:indice:].Descricao" placeholder="Opção" class="form-control opcao" />
        </div>
        <div class="col-md-2 text-center">
            <button class="btn btn-danger btn-remover-opcao">
                <i class="glyphicon glyphicon-trash" style="vertical-align: middle;"></i>
            </button>
        </div>
    </div>
</template>

<div>
    @Html.ActionLink("Voltar a Lista", "Index")
</div>

@section Scripts {
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/CriarQuestionario.js"></script>
    <script src="~/Scripts/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('.datepicker').datepicker();
        });
    </script>
}
